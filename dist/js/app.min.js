(()=>{"use strict";var e,t;function o(e){return+e.trim().slice(0,-2)}e=function(e){1==e?document.querySelector("html").classList.add("webp"):document.querySelector("html").classList.add("no-webp")},(t=new Image).onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const n=document.body,r=document.querySelector(".overlay"),s=document.querySelector(".header"),d=document.querySelector("#toggle-menu"),l=s.querySelectorAll("nav"),i=[...document.querySelectorAll("a, input, button")].filter((e=>!e.closest("header")));function c(){s.classList.contains("header--active")?(l.forEach((e=>e.addEventListener("transitionend",(()=>{e.classList.remove("header__nav--show")}),{once:!0}))),i.forEach((e=>e.setAttribute("tabindex","0")))):(l.forEach((e=>e.classList.add("header__nav--show"))),i.forEach((e=>e.setAttribute("tabindex","-1")))),n.classList.toggle("scroll-off"),r.classList.toggle("overlay--active"),setTimeout((()=>s.classList.toggle("header--active")),10)}function a(){document.querySelector(":root").style.setProperty("--header-height",`${s.clientHeight}px`)}d.addEventListener("click",c),r.addEventListener("click",c),window.addEventListener("load",a),window.addEventListener("resize",a);const u=o(getComputedStyle(document.documentElement).getPropertyValue("--body-padding-y"));let w=0;function h(){const e=".running-line",t=`${e}__wrapper`,n=`${e}__item--copied`;function r(e){return e.getBoundingClientRect().width}function s(e){return e.map((e=>r(e)))}function d(e,t){return e.reduce(((e,o)=>e+o+t),0)}document.querySelectorAll(`${e}`).forEach((e=>{const l=e.querySelector(t),i=r(e),c=[...l.children].filter((e=>!e.classList.contains(n))),a=s(c),u=o(getComputedStyle(l).getPropertyValue("gap")),w=d(a,u),h=d(s([...l.children]),u);if(e.style.setProperty("--length",w),h>=2*i)return;let p=h;for(;p<2*i;)l.append(...c.map((e=>{const t=e.cloneNode(!0);return t.classList.add(n),t}))),p+=w+u}))}window.addEventListener("scroll",(e=>{if(window.scrollY<u+s.clientHeight&&(s.classList.remove("header--scrolling--show"),s.classList.remove("header--scrolling--hidden")),window.scrollY<u){const e=u-window.scrollY;return void(s.style.top=`${e}px`)}s.style.top=0;const t=window.scrollY-w;Math.abs(t)<40||(w=window.scrollY,t<0?(s.classList.remove("header--scrolling--hidden"),s.classList.add("header--scrolling--show")):(s.classList.remove("header--scrolling--show"),s.classList.add("header--scrolling--hidden")))})),d.addEventListener("focus",(()=>{s.classList.remove("header--scrolling--hidden"),s.classList.add("header--scrolling--show")})),window.addEventListener("load",h),window.addEventListener("resize",h);const p=document.querySelector(".story__block--text").querySelector(".story__text-wrapper"),y=document.querySelector(".story__wheel-button--up"),m=document.querySelector(".story__wheel-button--down");function v(){return p.scrollTop>0}function L(){return p.scrollTop+p.clientHeight+1<p.scrollHeight}function f(){v()||L()?p.classList.remove("story__text-wrapper--centered"):p.classList.add("story__text-wrapper--centered"),v()?y.classList.add("story__wheel-button--show"):y.classList.remove("story__wheel-button--show"),L()?m.classList.add("story__wheel-button--show"):m.classList.remove("story__wheel-button--show")}function g(e){return t=>{const o=setInterval((()=>{p.scrollTop+=5*e,f()}),50);window.addEventListener("pointerup",(()=>clearInterval(o)),{once:!0})}}function E(e){return t=>{if("Space"!=t.code)return;if(t.repeat)return;const o=setInterval((()=>{p.scrollTop+=5*e,f()}),50);window.addEventListener("keyup",(()=>clearInterval(o)),{once:!0})}}let _;window.addEventListener("load",f),window.addEventListener("resize",f),y.addEventListener("pointerdown",g(-1)),y.addEventListener("keydown",E(-1)),y.addEventListener("blur",(()=>{v()||m.focus()})),m.addEventListener("pointerdown",g(1)),m.addEventListener("keydown",E(1)),m.addEventListener("blur",(()=>{L()||y.focus()})),p.addEventListener("mousewheel",(function(e){(v()||L())&&(e.preventDefault(),e.deltaY<0?(p.scrollTop-=30,f()):(p.scrollTop+=30,f()))})),p.addEventListener("touchstart",(e=>{_=e.targetTouches[0].clientY})),p.addEventListener("touchmove",(e=>{e.preventDefault();const t=e.targetTouches[0].clientY;p.scrollTop+=1*-(t-_),_=t,f()}));const b=document.querySelector(".footer"),A=b.querySelector(".footer__box"),S=o(getComputedStyle(document.documentElement).getPropertyValue("--throttle-ms"));let x=!1;function q(){const e=b.getBoundingClientRect();b.style.setProperty("--footer-top",`${e.top+window.scrollY}px`),b.style.setProperty("--footer-height",`${e.height}px`),b.style.setProperty("--footer-box-height",`${A.offsetHeight}px`)}function P(){document.documentElement.style.setProperty("--x","50vw"),document.documentElement.style.setProperty("--y",`${b.offsetTop+170}px`)}new IntersectionObserver((([e])=>{e.isIntersecting?x=!0:(x=!1,P())})).observe(b),window.addEventListener("load",P),window.addEventListener("resize",P),window.addEventListener("load",q),window.addEventListener("resize",q),window.addEventListener("mousemove",function(e,t){let o,n,r=!1;return function s(){if(r)return o=arguments,void(n=this);e.apply(this,arguments),r=!0,setTimeout((function(){r=!1,o&&(s.apply(n,o),o=n=null)}),t)}}((function(e){x&&(document.documentElement.style.setProperty("--x",`${e.pageX}px`),document.documentElement.style.setProperty("--y",`${e.pageY}px`))}),S))})();